<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="Generator" content="Microsoft Word 15 (filtered)">
<title>FLASHTABLE</title>
<link rel="styleSheet" type="text/css" href="TrioHelpStyle.css">
<meta name="keywords" content="FLASHTABLE">
</head>
<body>
<h1>FLASHTABLE</h1>
<h2>Type:</h2>
<p class="Category">
System Function
</p>
<h2>Syntax:</h2>
<p class="fixed">
value = FLASHTABLE(function, flashpage[, tablepage])
</p>
<h2>Description:</h2>
<p>
Function to copy TABLE data in RAM to and from the permanent
FLASH memory.
</p>
<p>
The flash memory is split into 32 pages numbered from 0, and
each page can store 16000 table elements. The table below shows the first few table
pages and how they map to table elements:
</p>
<table class="tablegrid">

 
<tr>
<td width="142" valign="top" class="tablegrid">

  
<p>
Table page
</p>

  
</td>
<td width="142" valign="top" class="tablegrid">

  
<p>
0
</p>

  
</td>
<td width="142" valign="top" class="tablegrid">

  
<p>
1
</p>

  
</td>
<td width="142" valign="top" class="tablegrid">

  
<p>
2
</p>

  
</td>
<td width="142" valign="top" class="tablegrid">

  
<p>
3
</p>

  
</td>
</tr>

 
<tr>
<td width="142" valign="top" class="tablegrid">

  
<p>
Table index range
</p>

  
</td>
<td width="142" valign="top" class="tablegrid">

  
<p>
0 to 15999
</p>

  
</td>
<td width="142" valign="top" class="tablegrid">

  
<p>
16000 to 31999
</p>

  
</td>
<td width="142" valign="top" class="tablegrid">

  
<p>
32000 to 47999
</p>

  
</td>
<td width="142" valign="top" class="tablegrid">

  
<p>
48000 to 63999
</p>

  
</td>
</tr>


</table>
<p>
Table pages are stored in flash pages, of which there are 32
(indexed 0 to 31), so flash pages can be used to store different table pages
for easy restoration, such as to define multiple behaviours.
</p>
<p class="note">
If FLASHTABLE is being used, then you cannot use 
<a href="FLASHVR.html">FLASHVR</a>
(-1)
</p>
<h2>Parameters:</h2>
<table class="tablegrid">

 
<tr>
<td width="83" rowspan="2" valign="top" class="tablegrid">

  
<p class="tablecontent">
value:
</p>

  
</td>
<td width="75" colspan="2" valign="top" class="tablegrid">

  
<p class="tablecontent">
<a href="TRUE.html">TRUE</a>
</p>

  
</td>
<td width="410" valign="top" class="tablegrid">

  
<p class="tablecontent">
FLASH page has been used (when function set to 3).
</p>

  
</td>
</tr>

 
<tr>
<td width="75" colspan="2" valign="top" class="tablegrid">

  
<p class="tablecontent">
<a href="FALSE.html">FALSE</a>
</p>

  
</td>
<td width="410" valign="top" class="tablegrid">

  
<p class="tablecontent">
FLASH page hasn’t been used (when function set to 3).
</p>

  
</td>
</tr>

 
<tr>
<td width="83" rowspan="5" valign="top" class="tablegrid">

  
<p class="tablecontent">
function:
</p>

  
</td>
<td width="485" colspan="3" valign="top" class="tablegrid">

  
<p class="tablecontent">
Specifies the required action.
</p>

  
</td>
</tr>

 
<tr>
<td width="65" valign="top" class="tablegrid">

  
<p class="tablecontent">
1
</p>

  
</td>
<td width="420" colspan="2" valign="top" class="tablegrid">

  
<p class="tablecontent">
Write a page of 
<a href="TABLE.html">TABLE</a>
 data
  into flash memory, always returning TRUE.
</p>

  
</td>
</tr>

 
<tr>
<td width="65" valign="top" class="tablegrid">

  
<p class="tablecontent">
2
</p>

  
</td>
<td width="420" colspan="2" valign="top" class="tablegrid">

  
<p class="tablecontent">
Read a page of flash memory into 
<a href="TABLE.html">TABLE</a>

  data, always returning TRUE.
</p>

  
</td>
</tr>

 
<tr>
<td width="65" valign="top" class="tablegrid">

  
<p class="tablecontent">
3
</p>

  
</td>
<td width="420" colspan="2" valign="top" class="tablegrid">

  
<p class="tablecontent">
Return TRUE if the flash page is in use (there is TABLE
  data flashed already), otherwise FALSE.
</p>

  
</td>
</tr>

 
<tr>
<td width="65" valign="top" class="tablegrid">

  
<p class="tablecontent">
4
</p>

  
</td>
<td width="420" colspan="2" valign="top" class="tablegrid">

  
<p class="tablecontent">
Erase flash page, always returning TRUE.
</p>

  
</td>
</tr>

 
<tr>
<td width="83" valign="top" class="tablegrid">

  
<p class="tablecontent">
flashpage:
</p>

  
</td>
<td width="485" colspan="3" valign="top" class="tablegrid">

  
<p class="tablecontent">
The index number (0 ... 31) of a 16000 values page of
  Flash EPROM where the table data is to be stored to or retrieved from.
</p>

  
</td>
</tr>

 
<tr>
<td width="83" valign="top" class="tablegrid">

  
<p class="tablecontent">
tablepage:
</p>

  
</td>
<td width="485" colspan="3" valign="top" class="tablegrid">

  
<p class="tablecontent">
The index number (0 ... 
<a href="INT.html">INT</a>
(
<a href="TSIZE.html">TSIZE</a>
<span class="MsoHyperlink"> </span>/ 16000)) of the
  page in table memory where the data is to be copied from or restored to.
  (Only used with functions 1 and 2).
</p>

  
</td>
</tr>

 
<tr height="0">

  
<td width="83">
</td>

  
<td width="65">
</td>

  
<td width="10">
</td>

  
<td width="410">
</td>

 
</tr>


</table>
<h2>Example 1:</h2>
<p>
Save (function 1) the 
<a href="TABLE.html">TABLE</a>
 page 2
data in locations (
<a href="TABLE.html">TABLE</a>
 indices 32000 to 47999) to flash
memory page 5.
</p>
<p class="codeexample">
FLASHTABLE(1, 5, 2)
</p>
<h2>Example 2:</h2>
<p>
Restore (function 2) the 
<a href="TABLE.html">TABLE</a>
 page
2 data in locations (
<a href="TABLE.html">TABLE</a>
 indices 32000 to 47999) from
flash memory page 3.
</p>
<p class="codeexample">
FLASHTABLE(2, 3, 2)
</p>
<h2>Example 3:</h2>
<p>
Check if FLASH memory page 5 is being used (function 3), and
if it has data, erase it.
</p>
<p class="codeexample">
IF FLASHTABLE(3, 5) THEN
</p>
<p class="codeexample">
   PRINT &quot;FLASH memory page 5 has data&quot;
</p>
<p class="codeexample">
   IF FLASHTABLE(4, 5) THEN
</p>
<p class="codeexample" style="margin-left:50.2pt;text-indent:21.8pt">
PRINT &quot;FLASH
memory page 5 has been erased&quot;
</p>
<p class="codeexample" style="text-indent:21.8pt">
ENDIF
</p>
<p class="codeexample">
ENDIF
</p>
<h2>See Also:</h2>
<p>
<a href="FLASHVR.html">FLASHVR</a>
, 
<a href="FLASH_STATUS.html">FLASH_STATUS</a>
, 
<a href="FLASH_TABLE_FIRST.html">FLASH_TABLE_FIRST</a>
,

<a href="FLASH_TABLE_LAST.html">FLASH_TABLE_LAST</a>
, 
<a href="TABLE.html">TABLE</a>
</p>
</body>
</html>
